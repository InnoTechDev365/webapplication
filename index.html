
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ExpenseCoin - Personal Finance Manager</title>
    <meta name="description" content="Comprehensive personal finance management application with analytics, expense tracking, and income management" />
    <meta name="author" content="ExpenseCoin" />
    <meta name="keywords" content="finance, expenses, income, analytics, budget, money management" />
    <link rel="canonical" href="/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://your-username.github.io/your-repo-name/" />
    <meta property="og:title" content="ExpenseCoin - Personal Finance Manager" />
    <meta property="og:description" content="Comprehensive personal finance management application with analytics, expense tracking, and income management" />
    <meta property="og:image" content="https://your-username.github.io/your-repo-name/favicon.ico" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://your-username.github.io/your-repo-name/" />
    <meta property="twitter:title" content="ExpenseCoin - Personal Finance Manager" />
    <meta property="twitter:description" content="Comprehensive personal finance management application with analytics, expense tracking, and income management" />
    <meta property="twitter:image" content="https://your-username.github.io/your-repo-name/favicon.ico" />

    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon.ico" />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0891b2" />
    <meta name="application-name" content="ExpenseCoin" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="ExpenseCoin" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="msapplication-config" content="./browserconfig.xml" />
    <meta name="msapplication-TileColor" content="#0891b2" />
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- Cross-browser compatibility -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="referrer" content="same-origin" />

    <!-- Preload critical resources -->
    <link rel="preload" href="./src/main.tsx" as="script" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- GitHub Pages specific meta tags -->
    <base href="./" />

    <style>
      /* Critical CSS for immediate rendering and cross-browser compatibility */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        font-size: 16px;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        text-size-adjust: 100%;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        line-height: 1.5;
        color: #1a202c;
        background-color: #f7fafc;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Loading spinner */
      .loading-spinner {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
      }

      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #e2e8f0;
        border-top: 4px solid #0891b2;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Error fallback styles */
      .error-boundary {
        text-align: center;
        padding: 2rem;
        max-width: 600px;
        margin: 2rem auto;
      }

      .error-boundary h1 {
        color: #e53e3e;
        margin-bottom: 1rem;
      }

      .error-boundary p {
        margin-bottom: 1rem;
        color: #4a5568;
      }

      .error-boundary button {
        background-color: #0891b2;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 0.375rem;
        cursor: pointer;
        font-size: 1rem;
      }

      .error-boundary button:hover {
        background-color: #0e7490;
      }

      /* Responsive design breakpoints */
      @media (max-width: 768px) {
        html {
          font-size: 14px;
        }
        
        body {
          padding: 0.5rem;
        }
      }

      @media (max-width: 480px) {
        html {
          font-size: 13px;
        }
      }

      /* High DPI display support */
      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        body {
          -webkit-font-smoothing: subpixel-antialiased;
        }
      }

      /* Print styles */
      @media print {
        body {
          background: white;
          color: black;
        }
        
        .no-print {
          display: none !important;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #1a202c;
          color: #f7fafc;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        body {
          background-color: white;
          color: black;
        }
      }

      /* Focus visible for accessibility */
      .focus-visible {
        outline: 2px solid #0891b2;
        outline-offset: 2px;
      }
    </style>
  </head>

  <body>
    <!-- Loading screen -->
    <div id="loading-screen" class="loading-spinner">
      <div class="spinner"></div>
    </div>

    <!-- Main app container -->
    <div id="root" style="min-height: 100vh;">
      <!-- Fallback content for when JavaScript is disabled -->
      <noscript>
        <div class="error-boundary">
          <h1>JavaScript Required</h1>
          <p>This application requires JavaScript to be enabled. Please enable JavaScript in your browser settings and reload the page.</p>
        </div>
      </noscript>
    </div>

    <!-- Error boundary fallback -->
    <script>
      // Global error handler for better debugging
      window.addEventListener('error', function(e) {
        console.error('Global error:', e.error);
        
        // Show user-friendly error message
        const root = document.getElementById('root');
        if (root && !root.querySelector('.react-app')) {
          root.innerHTML = `
            <div class="error-boundary">
              <h1>Something went wrong</h1>
              <p>We're sorry, but something unexpected happened. Please try refreshing the page.</p>
              <button onclick="window.location.reload()">Refresh Page</button>
            </div>
          `;
        }
      });

      // Hide loading screen when app loads
      window.addEventListener('load', function() {
        setTimeout(function() {
          const loadingScreen = document.getElementById('loading-screen');
          if (loadingScreen) {
            loadingScreen.style.display = 'none';
          }
        }, 1000);
      });

      // GitHub Pages routing fix for SPA
      (function(l) {
        if (l.search[1] === '/') {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location));

      // Service worker registration for PWA functionality
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('./sw.js')
            .then(function(registration) {
              console.log('SW registered: ', registration);
            })
            .catch(function(registrationError) {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }

      // Polyfills for older browsers
      if (!Element.prototype.matches) {
        Element.prototype.matches = Element.prototype.msMatchesSelector || 
                                    Element.prototype.webkitMatchesSelector;
      }

      if (!Element.prototype.closest) {
        Element.prototype.closest = function(s) {
          var el = this;
          do {
            if (Element.prototype.matches.call(el, s)) return el;
            el = el.parentElement || el.parentNode;
          } while (el !== null && el.nodeType === 1);
          return null;
        };
      }

      // Viewport height fix for mobile browsers
      function setVhProperty() {
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      }
      
      setVhProperty();
      window.addEventListener('resize', setVhProperty);
      window.addEventListener('orientationchange', setVhProperty);
    </script>

    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="./src/main.tsx"></script>

    <!-- GitHub Pages SPA redirect script -->
    <script>
      // Redirect handling for GitHub Pages SPA
      (function() {
        var redirect = sessionStorage.redirect;
        delete sessionStorage.redirect;
        if (redirect && redirect != location.href) {
          history.replaceState(null, null, redirect);
        }
      })();
    </script>
  </body>
</html>
